{"ast":null,"code":"var _jsxFileName = \"/home/michal/code/pap21l-z07/Clinic/src/main/frontend/my-app/src/components/DeleteAppointmentPatient.js\";\nimport React, { Component } from 'react';\nimport MyAppointmentsService from '../services/MyAppointmentsService';\nimport DoctorService from '../services/DoctorService';\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\nimport AppointmentService from '../services/AppointmentService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass DeleteAppointmentPatient extends Component {\n  constructor(props) {\n    super(props);\n\n    this.submitButtonClicked = event => {\n      var USERTOKEN = window.response.accessToken;\n      URL = \"http://localhost:8080/api/appointment/delete/\" + this.state.choosenAppoitmentId;\n      let config = {\n        headers: {\n          'Authorization': `Bearer ${USERTOKEN}`\n        }\n      };\n      axios.defaults.headers.common = {\n        'Authorization': `Bearer ${USERTOKEN}`\n      };\n      alert(this.state.choosenAppoitmentId);\n      axios.delete(URL, config).then(response => {\n        this.props.history.push(`/doctors`);\n        alert(\"usunieto\");\n      }).catch(error => {\n        this.props.history.push(`/doctors`);\n        alert(\"Nie udało się usunąć wizyty!\");\n        console.log(error);\n      });\n      this.props.history.push(`/doctors`);\n      var appointmentDate = null;\n      var docId = 0;\n      this.state.appointments.map(appointment => {\n        if (appointment.id === this.state.choosenAppoitmentId) {\n          appointmentDate = appointment.date;\n          docId = appointment.doctorId.toString();\n        }\n      }); // var date = this.state.choosenAppoitmentData.date.toString();\n      // var year = date.slice(0,4)\n      // var month = date.slice(5,7)\n      // var day = date.slice(8,10)\n      // var hour = date.slice(11,13)\n      // var minute = date.slice(14,16)\n      //     axios.post('http://localhost:8080/api/appointment/registerNewAppointment', {\n      //     \"doctorId\": this.state.choosenAppoitmentData.doctorId,\n      //     \"date\": [year, month, day, hour, minute]\n      // }, config)\n      //     .then(response =>{\n      //         console.log(response)\n      //         alert(\"Pomyślnie dodano wizytę!\")\n      //         this.props.history.push(`/myProfile`);\n      //     })\n      //     .catch(error=>{\n      //         alert(\"Nie udało się dodać wizyty!\")\n      //         console.log(error)\n      //         this.props.history.push(`/myProfile`);\n      //     })\n    };\n\n    this.state = {\n      myAppointments: [],\n      doctors: [],\n      appointments: [],\n      choosenAppoitmentId: 0\n    };\n  }\n\n  componentDidMount() {\n    MyAppointmentsService.getMyAppointments().then(response => {\n      this.setState({\n        myAppointments: response.data\n      });\n      alert(this.state.myAppointments);\n    });\n    DoctorService.getDoctors().then(response => {\n      this.setState({\n        doctors: response.data\n      });\n    });\n    AppointmentService.getAppointments().then(response => {\n      this.setState({\n        appointments: response.data\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        method: \"post\",\n        id: \"deleteAppointment\",\n        onSubmit: this.submitButtonClicked,\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          value: this.state.choosenAppoitmentData,\n          name: \"appointments\",\n          id: \"appointments\",\n          onChange: e => this.setState({\n            choosenAppoitmentId: e.target.value\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: null,\n            children: \"-----Wybierz Termin-----\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 21\n          }, this), this.state.myAppointments.map(appointment => {\n            return /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(\"option\", {\n                value: appointment.id,\n                children: appointment.date\n              }, appointment.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 41\n              }, this)\n            }, void 0, false);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nexport default DeleteAppointmentPatient;","map":{"version":3,"sources":["/home/michal/code/pap21l-z07/Clinic/src/main/frontend/my-app/src/components/DeleteAppointmentPatient.js"],"names":["React","Component","MyAppointmentsService","DoctorService","axios","Redirect","AppointmentService","DeleteAppointmentPatient","constructor","props","submitButtonClicked","event","USERTOKEN","window","response","accessToken","URL","state","choosenAppoitmentId","config","headers","defaults","common","alert","delete","then","history","push","catch","error","console","log","appointmentDate","docId","appointments","map","appointment","id","date","doctorId","toString","myAppointments","doctors","componentDidMount","getMyAppointments","setState","data","getDoctors","getAppointments","render","choosenAppoitmentData","e","target","value"],"mappings":"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","sourcesContent":["\n\nimport React, { Component } from 'react';\nimport MyAppointmentsService from '../services/MyAppointmentsService';\nimport DoctorService from '../services/DoctorService';\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\nimport AppointmentService from '../services/AppointmentService';\nclass DeleteAppointmentPatient extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            myAppointments:[],\n            doctors:[],\n            appointments:[],\n            choosenAppoitmentId:0,\n        }\n\n    }\n    submitButtonClicked = (event)=>{\n        var USERTOKEN = window.response.accessToken;\n        URL = \"http://localhost:8080/api/appointment/delete/\"+this.state.choosenAppoitmentId;\n        let config = {\n            headers:{\n                'Authorization': `Bearer ${USERTOKEN}`}\n            };\n\n        axios.defaults.headers.common = {'Authorization': `Bearer ${USERTOKEN}`}\n        alert(this.state.choosenAppoitmentId)\n\n\n        axios.delete(URL,config).then((response)=>{\n            this.props.history.push(`/doctors`);\n\n            alert(\"usunieto\");\n        }).catch(error=>{\n                this.props.history.push(`/doctors`);\n\n                    alert(\"Nie udało się usunąć wizyty!\")\n                    console.log(error)\n        \n                });\n        this.props.history.push(`/doctors`);\n        var appointmentDate=null;\n        var docId=0;\n        this.state.appointments.map((appointment)=>{\n            if (appointment.id===this.state.choosenAppoitmentId){\n                appointmentDate=appointment.date;\n                docId=appointment.doctorId.toString();\n            }\n        })\n\n        // var date = this.state.choosenAppoitmentData.date.toString();\n        // var year = date.slice(0,4)\n        // var month = date.slice(5,7)\n        // var day = date.slice(8,10)\n        // var hour = date.slice(11,13)\n        // var minute = date.slice(14,16)\n\n\n\n\n    //     axios.post('http://localhost:8080/api/appointment/registerNewAppointment', {\n    //     \"doctorId\": this.state.choosenAppoitmentData.doctorId,\n    //     \"date\": [year, month, day, hour, minute]\n    // }, config)\n    //     .then(response =>{\n    //         console.log(response)\n    //         alert(\"Pomyślnie dodano wizytę!\")\n    //         this.props.history.push(`/myProfile`);\n\n    //     })\n    //     .catch(error=>{\n    //         alert(\"Nie udało się dodać wizyty!\")\n    //         console.log(error)\n    //         this.props.history.push(`/myProfile`);\n\n    //     })\n    \n\n    }\n    componentDidMount(){\n\n        MyAppointmentsService.getMyAppointments().then((response)=>{\n            this.setState({myAppointments: response.data})\n            alert(this.state.myAppointments)\n        });\n        DoctorService.getDoctors().then((response)=>{\n            this.setState({doctors: response.data})\n        });\n        AppointmentService.getAppointments().then((response)=>{\n            this.setState({appointments: response.data})\n        });\n        }\n\n\n    \n\n    render(){\n        return(\n            <>\n            <form method=\"post\" id=\"deleteAppointment\" onSubmit={this.submitButtonClicked}>\n                <select value={this.state.choosenAppoitmentData} name=\"appointments\" id=\"appointments\" onChange={(e)=>this.setState({choosenAppoitmentId:e.target.value})}>\n                    <option value={null}>-----Wybierz Termin-----</option>\n                        {this.state.myAppointments.map(appointment=>{\n          \n                               \n\n                                \n                                return(\n                                <>\n                                    \n                                        <option key={appointment.id} value={appointment.id}>{appointment.date}</option>\n                                       \n                                </>\n                            \n                            \n                                \n                            )}\n                    )}\n                    </select>\n                    <button type=\"submit\"></button>\n            </form>\n            </>\n        )\n    }\n}\n\nexport default DeleteAppointmentPatient"]},"metadata":{},"sourceType":"module"}