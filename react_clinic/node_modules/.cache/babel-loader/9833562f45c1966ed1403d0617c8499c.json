{"ast":null,"code":"var _jsxFileName = \"/home/michal/code/pap21l-z07/Clinic/src/main/frontend/my-app/src/components/RegistrationFormDoctor.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Input from '../Input';\nimport axios from 'axios';\nimport { NavLink, Redirect } from 'react-router-dom';\nimport SpecialisationService from '../services/specialistionService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass RegistrationFormDoctor extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const data = new FormData(this.form);\n      axios.post('http://localhost:8080/api/registration/patient', {\n        'firstName': data.get('firstName'),\n        'lastName': data.get('lastName'),\n        'email': data.get('email'),\n        'password': data.get('password'),\n        'doctorSpecialisation': data.get('specialistation')\n      }).then(response => {\n        console.log(response);\n        alert(\"Pomyślnie zarejestrowano! Aby korzystać ze wszystkich usług potwierdź maila\");\n\n        /*#__PURE__*/\n        _jsxDEV(Redirect, {\n          path: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 13\n        }, this);\n      }).catch(error => {\n        alert(\"Nie udało się zarejestrować!\");\n        console.log(error);\n      });\n    };\n\n    this.handleError = (field, errmsg) => {\n      if (!field) return;\n\n      if (errmsg) {\n        this.setState(prevState => ({\n          failure: '',\n          errcount: prevState.errcount + 1,\n          errmsgs: { ...prevState.errmsgs,\n            [field]: errmsg\n          }\n        }));\n      } else {\n        this.setState(prevState => ({\n          failure: '',\n          errcount: prevState.errcount === 1 ? 0 : prevState.errcount - 1,\n          errmsgs: { ...prevState.errmsgs,\n            [field]: ''\n          }\n        }));\n      }\n    };\n\n    this.renderError = () => {\n      if (this.state.errcount || this.state.failure) {\n        const errmsg = this.state.failure || Object.values(this.state.errmsgs).find(v => v);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: errmsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 20\n        }, this);\n      }\n    };\n\n    if (props.error) {\n      this.state = {\n        failure: 'wrong username,email or password!',\n        errcount: 0,\n        specialisation: null\n      };\n    } else {\n      this.state = {\n        errcount: 0\n      };\n    }\n  }\n\n  componentDidMount() {\n    SpecialisationService.getSpecialisation().then(response => {\n      alert(response.data + \"tak\");\n      var list = [];\n      response.data.map(specialisation => {\n        list.push(specialisation);\n      });\n      this.setState({\n        specialisation: list\n      });\n    });\n  }\n\n  render() {\n    const inputs = this.props.inputs.map(({\n      name,\n      placeholder,\n      type,\n      value,\n      className\n    }, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        class: \"form-label\",\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        name: name,\n        placeholder: placeholder,\n        type: type,\n        value: value,\n        className: type === 'submit' ? className : '',\n        className: \"form-control\",\n        handleError: this.handleError\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 68\n    }, this));\n    const errors = this.renderError();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container my-2\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", { ...this.props,\n        onSubmit: this.handleSubmit,\n        ref: fm => {\n          this.form = fm;\n        },\n        children: [inputs, this.state.specialisation.map(specialisation => {\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              id: specialisation,\n              name: \"gender\",\n              value: \"male\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"male\",\n              children: \"Male\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 51\n            }, this)]\n          }, void 0, true);\n        }), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          id: \"male\",\n          name: \"gender\",\n          value: \"male\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"male\",\n          children: \"Male\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 47\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          id: \"female\",\n          name: \"gender\",\n          value: \"female\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"female\",\n          children: \"Female\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 51\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          id: \"other\",\n          name: \"gender\",\n          value: \"other\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"other\",\n          children: \"Other\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 49\n        }, this), errors]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nRegistrationFormDoctor.propTypes = {\n  name: PropTypes.string,\n  action: PropTypes.string,\n  method: PropTypes.string,\n  inputs: PropTypes.array,\n  error: PropTypes.string\n};\nexport default RegistrationFormDoctor;","map":{"version":3,"sources":["/home/michal/code/pap21l-z07/Clinic/src/main/frontend/my-app/src/components/RegistrationFormDoctor.js"],"names":["React","Component","PropTypes","Input","axios","NavLink","Redirect","SpecialisationService","RegistrationFormDoctor","constructor","props","handleSubmit","event","preventDefault","data","FormData","form","post","get","then","response","console","log","alert","catch","error","handleError","field","errmsg","setState","prevState","failure","errcount","errmsgs","renderError","state","Object","values","find","v","specialisation","componentDidMount","getSpecialisation","list","map","push","render","inputs","name","placeholder","type","value","className","index","errors","fm","propTypes","string","action","method","array"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Input from '../Input';\nimport axios from 'axios';\nimport { NavLink, Redirect } from 'react-router-dom';\nimport SpecialisationService from '../services/specialistionService';\nclass RegistrationFormDoctor extends Component {\n\n    constructor(props) {\n        super(props)\n        if(props.error) {\n            this.state = {\n              failure: 'wrong username,email or password!',\n              errcount: 0,\n              specialisation:null,\n            }\n        } else {\n            this.state = { errcount: 0 }\n        }\n    }\n    handleSubmit = (event) =>{\n        event.preventDefault()\n        const data = new FormData(this.form)\n        axios.post('http://localhost:8080/api/registration/patient', {'firstName':data.get('firstName'),\n        'lastName':data.get('lastName'),\n        'email':data.get('email'),\n        'password':data.get('password'),\n        'doctorSpecialisation':data.get('specialistation')})\n        .then(response =>{\n            console.log(response)\n            alert(\"Pomyślnie zarejestrowano! Aby korzystać ze wszystkich usług potwierdź maila\");\n            <Redirect path='/' />;\n        })\n        .catch(error=>{\n            alert(\"Nie udało się zarejestrować!\")\n            console.log(error)\n        })\n    }\n\n\n\n    handleError = (field, errmsg) => {\n        if(!field) return\n\n        if(errmsg) {\n            this.setState((prevState) => ({\n                failure: '',\n                errcount: prevState.errcount + 1, \n                errmsgs: {...prevState.errmsgs, [field]: errmsg}\n            }))\n        } else {\n            this.setState((prevState) => ({\n                failure: '',\n                errcount: prevState.errcount===1? 0 : prevState.errcount-1,\n                errmsgs: {...prevState.errmsgs, [field]: ''}\n            }))\n        }\n    }\n\n    renderError = () => {\n        if(this.state.errcount || this.state.failure) {\n            const errmsg = this.state.failure \n              || Object.values(this.state.errmsgs).find(v=>v)\n            return <div className=\"error\">{errmsg}</div>\n        }\n    }\n    componentDidMount(){\n        SpecialisationService.getSpecialisation().then((response)=>{\n            alert(response.data+\"tak\")\n            var list = []\n            response.data.map(specialisation=>{\n                list.push(specialisation)\n            })\n        this.setState({specialisation:list})\n            });\n\n        }\n    render() {\n        const inputs = this.props.inputs.map(\n          ({name, placeholder, type, value, className}, index) => (<div className=\"mb-2\">\n            <label class=\"form-label\">{name}</label>\n            <Input key={index} name={name} placeholder={placeholder} type={type} value={value}\n              className={type==='submit'? className : ''} className=\"form-control\" handleError={this.handleError} />\n         </div>\n          )\n        )\n\n        const errors = this.renderError()\n        return (\n            <div className=\"container my-2\">\n            <form {...this.props} onSubmit={this.handleSubmit} ref={fm => {this.form=fm}} >\n              {inputs}\n              {this.state.specialisation.map(specialisation=>{\n                  return(\n                      <>\n                    <input type=\"radio\" id={specialisation} name=\"gender\" value=\"male\"/>\n                    <label for=\"male\">Male</label><br></br>\n                  </>\n                  )\n                })}\n                <input type=\"radio\" id=\"male\" name=\"gender\" value=\"male\"/>\n                <label for=\"male\">Male</label><br></br>\n                <input type=\"radio\" id=\"female\" name=\"gender\" value=\"female\"/>\n                <label for=\"female\">Female</label><br></br>\n                <input type=\"radio\" id=\"other\" name=\"gender\" value=\"other\"/>\n                <label for=\"other\">Other</label><br></br>\n              {errors}\n            </form>\n            </div>\n        )\n    }\n}\n\nRegistrationFormDoctor.propTypes = {\n  name: PropTypes.string,\n  action: PropTypes.string,\n  method: PropTypes.string,\n  inputs: PropTypes.array,\n  error: PropTypes.string\n}\n\nexport default RegistrationFormDoctor"]},"metadata":{},"sourceType":"module"}