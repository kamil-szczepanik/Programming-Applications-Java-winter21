{"ast":null,"code":"var _jsxFileName = \"/home/michal/code/pap21l-z07/Clinic/src/main/frontend/my-app/src/components/DeleteAppointmentPatient.js\";\nimport React, { Component } from 'react';\nimport MyAppointmentsService from '../services/MyAppointmentsService';\nimport DoctorService from '../services/DoctorService';\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\nimport AppointmentService from '../services/AppointmentService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass DeleteAppointmentPatient extends Component {\n  constructor(props) {\n    super(props);\n\n    this.submitButtonClicked = event => {\n      var USERTOKEN = window.response.accessToken;\n      URL = \"http://localhost:8080/api/appointment/delete/\" + this.state.choosenAppoitmentId;\n      let config = {\n        headers: {\n          'Authorization': `Bearer ${USERTOKEN}`\n        }\n      };\n      axios.defaults.headers.common = {\n        'Authorization': `Bearer ${USERTOKEN}`\n      };\n      var appointmentDate = null;\n      var docId = 0;\n      this.state.appointments.map(appointment => {\n        if (appointment.id.toString() === this.state.choosenAppoitmentId.toString()) {\n          appointmentDate = appointment.date;\n          docId = appointment.doctorId.toString();\n        }\n      });\n      axios.delete(URL, config).then(response => {\n        alert(\"Usunięto wizytę\");\n        var date = appointmentDate.toString();\n        var year = parseInt(date.slice(0, 4));\n        var month = parseInt(date.slice(5, 7));\n        var day = parseInt(date.slice(8, 10));\n        var hour = parseInt(date.slice(11, 13));\n        var minute = parseInt(date.slice(14, 16));\n        axios.post('http://localhost:8080/api/appointment/registerNewAppointment', {\n          \"doctorId\": docId.toString(),\n          \"date\": [year, month, day, hour, minute]\n        }, config).then(response => {\n          console.log(response);\n          this.props.history.push(`/myProfile`);\n        }).catch(error => {\n          console.log(error);\n          this.props.history.push(`/myProfile`);\n        });\n        this.props.history.push(`/myProfile`);\n      }).catch(error => {\n        alert(\"Nie udało się usunąć wizyty!\");\n        console.log(error);\n      });\n      this.props.history.push(`/myProfile`);\n    };\n\n    this.state = {\n      myAppointments: [],\n      doctors: [],\n      appointments: [],\n      choosenAppoitmentId: 0\n    };\n  }\n\n  componentDidMount() {\n    MyAppointmentsService.getMyAppointments().then(response => {\n      this.setState({\n        myAppointments: response.data\n      });\n    });\n    DoctorService.getDoctors().then(response => {\n      this.setState({\n        doctors: response.data\n      });\n    });\n    AppointmentService.getAppointments().then(response => {\n      this.setState({\n        appointments: response.data\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"my-4\",\n        children: \"Usu\\u0144 wizyt\\u0119\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        method: \"post\",\n        id: \"deleteAppointment\",\n        onSubmit: this.submitButtonClicked,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row justify-content-center my-4 mx-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-10 col-md-5\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-select text-center\",\n              value: this.state.choosenAppoitmentData,\n              name: \"appointments\",\n              id: \"appointments\",\n              onChange: e => this.setState({\n                choosenAppoitmentId: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: null,\n                children: \"-----Wybierz Termin-----\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 21\n              }, this), this.state.myAppointments.map(appointment => {\n                return /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: /*#__PURE__*/_jsxDEV(\"option\", {\n                    className: \"text-center\",\n                    value: appointment.id,\n                    children: appointment.date\n                  }, appointment.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-2 text-start\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-outline-danger\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fa fa-trash btn-outline-danger\",\n                \"aria-hidden\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 78\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default DeleteAppointmentPatient;","map":{"version":3,"sources":["/home/michal/code/pap21l-z07/Clinic/src/main/frontend/my-app/src/components/DeleteAppointmentPatient.js"],"names":["React","Component","MyAppointmentsService","DoctorService","axios","Redirect","AppointmentService","DeleteAppointmentPatient","constructor","props","submitButtonClicked","event","USERTOKEN","window","response","accessToken","URL","state","choosenAppoitmentId","config","headers","defaults","common","appointmentDate","docId","appointments","map","appointment","id","toString","date","doctorId","delete","then","alert","year","parseInt","slice","month","day","hour","minute","post","console","log","history","push","catch","error","myAppointments","doctors","componentDidMount","getMyAppointments","setState","data","getDoctors","getAppointments","render","choosenAppoitmentData","e","target","value"],"mappings":"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","sourcesContent":["\n\nimport React, { Component } from 'react';\nimport MyAppointmentsService from '../services/MyAppointmentsService';\nimport DoctorService from '../services/DoctorService';\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\nimport AppointmentService from '../services/AppointmentService';\nclass DeleteAppointmentPatient extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            myAppointments:[],\n            doctors:[],\n            appointments:[],\n            choosenAppoitmentId:0,\n        }\n\n    }\n    submitButtonClicked = (event)=>{\n        var USERTOKEN = window.response.accessToken;\n        URL = \"http://localhost:8080/api/appointment/delete/\"+this.state.choosenAppoitmentId;\n        let config = {\n            headers:{\n                'Authorization': `Bearer ${USERTOKEN}`}\n            };\n\n        axios.defaults.headers.common = {'Authorization': `Bearer ${USERTOKEN}`}\n\n        var appointmentDate=null;\n        var docId=0;\n        this.state.appointments.map((appointment)=>{\n            if (appointment.id.toString()===this.state.choosenAppoitmentId.toString()){\n                appointmentDate=appointment.date;\n                docId=appointment.doctorId.toString();\n            }\n        })\n        axios.delete(URL,config).then((response)=>{\n\n            alert(\"Usunięto wizytę\");\n            var date = appointmentDate.toString();\n        var year = parseInt(date.slice(0,4))\n        var month = parseInt(date.slice(5,7))\n        var day = parseInt(date.slice(8,10))\n        var hour = parseInt(date.slice(11,13))\n        var minute = parseInt(date.slice(14,16))\n\n        axios.post('http://localhost:8080/api/appointment/registerNewAppointment', {\n        \"doctorId\": docId.toString(),\n        \"date\": [year, month, day, hour, minute]\n    }, config)\n        .then(response =>{\n            console.log(response)\n            this.props.history.push(`/myProfile`);\n\n        })\n        .catch(error=>{\n            console.log(error)\n            this.props.history.push(`/myProfile`);\n\n        })\n    \n        this.props.history.push(`/myProfile`);\n            \n        }).catch(error=>{\n\n                    alert(\"Nie udało się usunąć wizyty!\")\n                    console.log(error)\n         \n                });\n        this.props.history.push(`/myProfile`)\n\n        \n\n    }\n    componentDidMount(){\n\n        MyAppointmentsService.getMyAppointments().then((response)=>{\n            this.setState({myAppointments: response.data})\n        });\n        DoctorService.getDoctors().then((response)=>{\n            this.setState({doctors: response.data})\n        });\n        AppointmentService.getAppointments().then((response)=>{\n            this.setState({appointments: response.data})\n        });\n        }\n\n\n    \n\n    render(){\n        return(\n            <div className=\"container\">\n                <h1 className=\"my-4\">Usuń wizytę</h1>\n            <form method=\"post\" id=\"deleteAppointment\" onSubmit={this.submitButtonClicked}>\n            <div className=\"row justify-content-center my-4 mx-1\">\n                <div className=\"col-10 col-md-5\">\n                    \n                <select className=\"form-select text-center\" value={this.state.choosenAppoitmentData} name=\"appointments\" id=\"appointments\" onChange={(e)=>this.setState({choosenAppoitmentId:e.target.value})}>\n                    <option value={null}>-----Wybierz Termin-----</option>\n                        {this.state.myAppointments.map(appointment=>{\n          \n                               \n\n                                \n                                return(\n                                <>\n                                    \n                                        <option className=\"text-center\" key={appointment.id} value={appointment.id}>{appointment.date}</option>\n                                       \n                                </>\n                            \n                            \n                                \n                            )}\n                    )}\n                    </select>\n                    </div>\n                    <div className=\"col-2 text-start\">\n                    \n                    <button type=\"submit\" className=\"btn btn-outline-danger\"><i class=\"fa fa-trash btn-outline-danger\" aria-hidden=\"true\"></i></button>\n                    </div>\n            </div>\n            </form>\n            </div>\n        )\n    }\n}\n\nexport default DeleteAppointmentPatient"]},"metadata":{},"sourceType":"module"}