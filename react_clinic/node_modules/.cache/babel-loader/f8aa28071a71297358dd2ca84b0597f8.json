{"ast":null,"code":"var _jsxFileName = \"/home/michal/code/pap21l-z07/react_clinic/src/components/ANOTHERLoginComponent.js\";\nimport React, { Component } from 'react';\nimport AuthenticationService from '../services/AuthenticationService';\nimport context from '../components/context/context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass LoginComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      hasLoginFailed: false,\n      showSuccessMessage: false,\n      accountID: null,\n      email: null,\n      roles: null,\n      accessToken: null,\n      tokenType: null\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.loginClicked = this.loginClicked.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  getToken() {\n    return this.state.getToken;\n  }\n\n  loginClicked() {\n    AuthenticationService.executeBasicAuthenticationService(this.state.username, this.state.password).then(response => {\n      this.setState({\n        accountID: response.data.id,\n        email: response.data.email,\n        roles: response.data.roles,\n        accessToken: response.data.accessToken,\n        tokenType: response.data.tokenType\n      });\n      window.response = response.data;\n      alert(\"Zalogowano pomyślnie\");\n      AuthenticationService.registerSuccessfulLogin(this.state.username, this.state.password);\n      window.response.roles[0] === \"PATIENT\" ? this.props.history.push(`/myProfile`) : this.props.history.push(`/myProfile`);\n    }).catch(() => {\n      this.setState({\n        showSuccessMessage: false\n      });\n      this.setState({\n        hasLoginFailed: true\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8 m-auto mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Logowanie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), this.state.hasLoginFailed && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-warning\",\n            children: \"Niepoprawne dane\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 55\n          }, this), this.state.showSuccessMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Zalogowano pomy\\u015Blnie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 59\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"username\",\n              className: \"col-md-4 col-form-label text-md-end\",\n              children: \"Nazwa U\\u017Cytkownika:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 my-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                type: \"text\",\n                name: \"username\",\n                value: this.state.username,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row form-group mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"password\",\n              className: \"col-md-4 col-form-label text-md-end\",\n              children: \"Has\\u0142o:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 my-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control\",\n                type: \"password\",\n                name: \"password\",\n                value: this.state.password,\n                onChange: this.handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-outline-light btn-lg\",\n          type: \"submit\",\n          onClick: this.loginClicked,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default LoginComponent;","map":{"version":3,"sources":["/home/michal/code/pap21l-z07/react_clinic/src/components/ANOTHERLoginComponent.js"],"names":["React","Component","AuthenticationService","context","LoginComponent","constructor","props","state","username","password","hasLoginFailed","showSuccessMessage","accountID","email","roles","accessToken","tokenType","handleChange","bind","loginClicked","event","setState","target","name","value","getToken","executeBasicAuthenticationService","then","response","data","id","window","alert","registerSuccessfulLogin","history","push","catch","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport AuthenticationService from '../services/AuthenticationService';\nimport context from '../components/context/context';\nclass LoginComponent extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            username: '',\n            password: '',\n            hasLoginFailed: false,\n            showSuccessMessage: false,\n            accountID:null,\n            email:null,\n            roles:null,\n            accessToken:null,\n            tokenType:null,\n\n        }\n\n        this.handleChange = this.handleChange.bind(this)\n        this.loginClicked = this.loginClicked.bind(this)\n    }\n\n    handleChange(event) {\n        this.setState(\n            {\n                [event.target.name]\n                    : event.target.value\n            }\n        )\n    }\n    getToken(){\n        return this.state.getToken;\n    }\n    loginClicked() {\n\n        AuthenticationService\n            .executeBasicAuthenticationService(this.state.username, this.state.password)\n            .then((response) => {\n                this.setState({accountID:response.data.id,\n                    email:response.data.email,\n                    roles:response.data.roles,\n                    accessToken:response.data.accessToken,\n                    tokenType:response.data.tokenType})\n                window.response=response.data;\n                alert(\"Zalogowano pomyślnie\")\n                \n                AuthenticationService.registerSuccessfulLogin(this.state.username, this.state.password)\n                window.response.roles[0]===\"PATIENT\"?this.props.history.push(`/myProfile`):this.props.history.push(`/myProfile`);\n            }).catch(() => {\n                this.setState({ showSuccessMessage: false })\n                this.setState({ hasLoginFailed: true })\n            })\n\n    }\n\n    render() {\n        return (\n            <div className=\"container\">\n                <div className=\"col-md-8 m-auto mt-3\">\n                    <form>\n                        <h1>Logowanie</h1>\n                        {/*<ShowInvalidCredentials hasLoginFailed={this.state.hasLoginFailed}/>*/}\n                        {this.state.hasLoginFailed && <div className=\"alert alert-warning\">Niepoprawne dane</div>}\n                        {this.state.showSuccessMessage && <div>Zalogowano pomyślnie</div>}\n                        {/*<ShowLoginSuccessMessage showSuccessMessage={this.state.showSuccessMessage}/>*/}\n        \n                        <div className=\"row form-group\">\n                            <label for=\"username\" className=\"col-md-4 col-form-label text-md-end\">Nazwa Użytkownika:</label>\n                            <div className=\"col-md-6 my-auto\">\n                                <input className=\"form-control\" type=\"text\" name=\"username\" value={this.state.username} onChange={this.handleChange} />\n                            </div>\n                        </div>\n                            \n                        <div className=\"row form-group mb-3\">\n                        \n                            <label for=\"password\" className=\"col-md-4 col-form-label text-md-end\">Hasło:</label>\n                        \n                            <div className=\"col-md-6 my-auto\">\n                                <input className=\"form-control\" type=\"password\" name=\"password\" value={this.state.password} onChange={this.handleChange} />\n                            </div>\n                        </div>\n                            \n                    </form>\n                    <button className=\"btn btn-outline-light btn-lg\" type=\"submit\" onClick={this.loginClicked}>Login</button>\n                </div>\n                    \n                \n            </div>\n                \n        )\n    }\n}\n\nexport default LoginComponent"]},"metadata":{},"sourceType":"module"}